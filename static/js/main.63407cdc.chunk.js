(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{189:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(38),i=n.n(r),o=n(118),s=(n(189),n(1)),l=n.n(s),d=n(2),u=n(273),j=n(268),b=n(269),p=n(80),h=n(111),m=n(163),f=n(41),O=Object(m.a)({apiKey:"AIzaSyCMkE9L2Mu1PCh5dfDQXejgZQI-BUCcA_s",authDomain:"chat-app-2-ca78a.firebaseapp.com",projectId:"chat-app-2-ca78a",storageBucket:"chat-app-2-ca78a.appspot.com",messagingSenderId:"81901785324",appId:"1:81901785324:web:2e828598a573fea29d15c9"}),x=Object(h.b)(O),v=Object(f.e)(),g=n(40),y=n(70),C=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.b)(v,t),e.next=3,Object(f.a)(a,Object(y.a)(Object(y.a)({},n),{},{createdAt:Object(f.j)()}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(e){for(var t=e.split(" ").filter((function(e){return e})),n=t.length,a=[],c=[],r=[],i=0;i<n;i++)a[i]=!1;return function e(i){for(var o=0;o<n;o++)a[o]||(a[o]=!0,c[i]=t[o],i===n-1&&r.push(c.join(" ")),e(i+1),a[o]=!1)}(0),r.reduce((function(e,t){var n=function(e){var t=[],n="";return e.split("").forEach((function(e){n+=e,t.push(n)})),t}(t);return[].concat(Object(g.a)(e),Object(g.a)(n))}),[])},N=n(11),R=u.a.Title,k=new h.a;var I,U=function(){var e=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)(x,k);case 2:if(t=e.sent,n=t._tokenResponse,a=t.user,null===n||void 0===n?void 0:n.isNewUser)try{C("users",{displayName:a.displayName,email:a.email,photoURL:a.photoURL,uid:a.uid,providerID:a.providerId,keywords:w(null===(c=a.displayName)||void 0===c?void 0:c.toLowerCase())})}catch(r){console.error("Error adding document: ",r)}case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{children:Object(N.jsx)(j.a,{justify:"center",style:{height:800},children:Object(N.jsxs)(b.a,{span:8,children:[Object(N.jsx)(R,{style:{textAlign:"center"},children:"Login"}),Object(N.jsx)(p.a,{style:{width:"100%",marginBottom:5},onClick:e,children:"\u0110\u0103ng nh\u1eadp b\u1eb1ng Facebook"}),Object(N.jsx)(p.a,{style:{width:"100%"},children:"\u0110\u0103ng nh\u1eadp b\u1eb1ng Google"})]})})})},S=n(19),L=n(49),A=n(50),M=n(272),F=n(278),V=n(78),_=n(277),T=n(279),E=n(271),z=A.a.div(I||(I=Object(L.a)(["\n        margin-bottom: 12px;\n        padding: 4px;\n         padding-left: 12px;\n        display: flex;\n        border-bottom: 1px solid rgb(230, 230, 230);\n        .author{\n            color: #fff;\n            font-weight: bold;\n        }\n        .displayname{\n            margin-left: 5px;\n            font-weight: bold;\n            color: #fff;\n\n        }\n        .date{\n            margin-left: 10px;\n            font-size: 12px;\n            color: #000; \n        }\n        .content{\n            color: #fff;\n        }\n\n        .messageStyledchat{\n          background-color: \t#FF66CC;\n            border-radius: 12px;\n            padding:6px;   \n        }\n     \n\n      \n\n"])));function P(e){var t="";return e&&(t=(t=Object(E.a)(new Date(1e3*e),new Date)).charAt(0).toUpperCase()+t.slice(1)),t}function D(e){var t,n=e.text,a=e.displayName,c=e.createdAt,r=e.photoURL;return Object(N.jsxs)(z,{children:[Object(N.jsx)(F.a,{size:"large",src:r,className:"avt_mess",style:{marginRight:12,flexShrink:0},children:r?"":null===a||void 0===a||null===(t=a.charAt(0))||void 0===t?void 0:t.toUpperCase()}),Object(N.jsxs)("div",{className:"messageStyledchat",children:[Object(N.jsx)(u.a.Text,{className:"author",children:a}),Object(N.jsx)(u.a.Text,{className:"date",children:P(null===c||void 0===c?void 0:c.seconds)}),Object(N.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(N.jsx)(u.a.Text,{className:"content",children:n})})]})]})}var B=n(27),G=n(270),J=c.a.createContext();var K,Q,H,X,Z,q,W=function(e){var t=e.children,n=Object(a.useState)({}),r=Object(S.a)(n,2),i=r[0],o=r[1],s=Object(B.f)(),l=Object(a.useState)(!0),d=Object(S.a)(l,2),u=d[0],j=d[1];return c.a.useEffect((function(){x.onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.uid,a=e.email,c=e.photoURL;o({displayName:t,uid:n,email:a,photoURL:c}),j(!1),s("/")}else j(!1),s("/login")}))}),[s]),Object(N.jsx)(J.Provider,{value:{user:i},children:u?Object(N.jsx)(G.a,{}):t})},Y=n(280),$=function(e,t){var n=c.a.useState([]),a=Object(S.a)(n,2),r=a[0],i=a[1];return c.a.useEffect((function(){var n=Object(f.i)(Object(f.b)(v,e),Object(f.h)("createdAt"));if(t){if(!t.compareValue||!t.compareValue.length)return;n=Object(f.i)(n,Object(f.l)(t.fieldName,t.operator,t.compareValue))}return Object(f.g)(n,(function(e){var t=e.docs.map((function(e){return Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id})}));i(t)}))}),[e,t]),r},ee=c.a.createContext();function te(e){var t=e.children,n=c.a.useState(!1),a=Object(S.a)(n,2),r=a[0],i=a[1],o=c.a.useState(""),s=Object(S.a)(o,2),l=s[0],d=s[1],u=c.a.useState(!1),j=Object(S.a)(u,2),b=j[0],p=j[1],h=c.a.useContext(J).user,m=c.a.useMemo((function(){return{fieldName:"members",operator:"array-contains",compareValue:h.uid}}),[h.uid]),f=$("rooms",m),O=c.a.useMemo((function(){return f.find((function(e){return e.id===l}))||{}}),[l,f]),x=c.a.useMemo((function(){return{fieldName:"uid",operator:"in",compareValue:O.members}}),[O.members]),v=$("users",x);return Object(N.jsx)(ee.Provider,{value:{rooms:f,isAddRoomVisible:r,SetisAddRoomVisible:i,selectedRoomId:l,setSelectedRoomId:d,selectedRoom:O,members:v,isInviteMemberVisible:b,setIsInviteMemberVisible:p},children:t})}var ne=A.a.div(K||(K=Object(L.a)(["\n  display: flex;\n  justify-content: space-between;\n  height: 56px;\n  padding: 0 16px;\n  align-items: center;\n  border-bottom: 1px solid rgb(230, 230, 230);\n\n  .header {\n    &__info {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n\n    &__title {\n      margin: 0;\n      font-weight: bold;\n      font-size: 20px;\n      \n    }\n    &__description {\n      font-size: 12px;\n    }\n  }\n"]))),ae=A.a.div(Q||(Q=Object(L.a)(["\n  display: flex;\n  align-items: center;\n"]))),ce=A.a.div(H||(H=Object(L.a)(["\n  height: 100vh;\n"]))),re=A.a.div(X||(X=Object(L.a)(["\n  height: calc(100% - 56px);\n  display: flex;\n  flex-direction: column;\n  padding: 12px 12px 12px 0;\n  justify-content: flex-end;\n"]))),ie=Object(A.a)(M.a)(Z||(Z=Object(L.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 2px 2px 2px 0;\n  border: 1px solid rgb(230, 230, 230);\n  border-radius: 2px;\n\n  .ant-form-item {\n    flex: 1;\n    margin-bottom: 0;\n  }\n\n  .ant-form-item:nth-child(2) {\n    flex: 0;\n    margin-bottom: 0;\n    cursor: pointer;\n    \n    .ant-form-item-control-input-content{\n        position: relative;\n      display: flex;\n    }\n  }\n"]))),oe=A.a.div(q||(q=Object(L.a)(["\n  max-height: 100%;\n  overflow-y: auto;\n"])));function se(){var e=c.a.useContext(J).user,t=e.uid,n=e.photoURL,r=e.displayName,i=Object(a.useRef)(null),o=Object(a.useRef)(null),s=c.a.useContext(ee),u=s.selectedRoom,j=s.members,b=s.setIsInviteMemberVisible,h=c.a.useState(""),m=Object(S.a)(h,2),f=m[0],O=m[1],x=M.a.useForm(),v=Object(S.a)(x,1)[0],g=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f&&C("messages",{text:f,uid:t,photoURL:n,roomId:u.id,displayName:r}),v.resetFields(["messages","img"]),O(""),(null===i||void 0===i?void 0:i.current)&&setTimeout((function(){i.current.focus()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=c.a.useMemo((function(){return{fieldName:"roomId",operator:"==",compareValue:u.id}}),[u.id]),w=$("messages",y);return Object(a.useEffect)((function(){(null===o||void 0===o?void 0:o.current)&&(o.current.scrollTop=o.current.scrollHeight+50)}),[w]),Object(N.jsx)(ce,{children:u.id?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(ne,{children:[Object(N.jsxs)("div",{className:"header__info",children:[Object(N.jsx)("p",{className:"header__title",children:u.name}),Object(N.jsx)("span",{className:"header__desciption",children:u.description})]}),Object(N.jsxs)(ae,{children:[Object(N.jsxs)(p.a,{icon:Object(N.jsx)(Y.a,{}),type:"text",onClick:function(){return b(!0)},children:["M\u1eddi"," "]}),Object(N.jsx)(F.a.Group,{size:"small",maxCount:2,children:j.map((function(e){var t;return Object(N.jsx)(V.a,{title:e.displayName,children:Object(N.jsx)(F.a,{src:e.photoURL,children:e.photoURL?"":null===(t=e.displayName)||void 0===t?void 0:t.charAt(0).toUpperCase()})},e.id)}))})]})]}),Object(N.jsxs)(re,{children:[Object(N.jsx)(oe,{ref:o,children:w.map((function(e){return Object(N.jsx)(D,{text:e.text,photoURL:e.photoURL,displayName:e.displayName,createdAt:e.createdAt,color:e.colorMessage},e.id)}))}),Object(N.jsxs)(ie,{form:v,children:[Object(N.jsx)(M.a.Item,{name:"messages",children:Object(N.jsx)(_.a,{ref:i,value:f,onChange:function(e){return function(e){O(e.target.value)}(e)},onPressEnter:g,bordered:!1,autoComplete:"off",placeholder:"nh\u1eadp chat"})}),Object(N.jsx)(p.a,{type:"primary",onClick:g,children:"G\u1eedi"})]})]})]}):Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(T.a,{message:"h\xe3y ch\u1ecdn ph\xf2ng",type:"info",showIcon:!0,style:{margin:5}})})})}var le,de=Object(a.memo)(se),ue=A.a.div(le||(le=Object(L.a)(["\n        display:flex;\n        justify-content:space-between;\n        padding:12px 16px;\n        border-bottom:1px solid #ccc;\n\n        .usermain{\n            display:flex;\n            align-items:center;\n        }\n        .username{\n            color:white;\n            margin-left:10px;\n        }\n\n"])));function je(){var e,t,n=c.a.useContext(J).user;return Object(N.jsxs)(ue,{children:[Object(N.jsxs)("div",{className:"usermain",children:[Object(N.jsx)(F.a,{src:n.photoURL,children:n.photoURL?"":null===(e=n.displayName)||void 0===e||null===(t=e.charAt(0))||void 0===t?void 0:t.toUpperCase()}),Object(N.jsx)(u.a.Text,{className:"username",children:n.displayName})]}),Object(N.jsx)(p.a,{ghost:!0,onClick:function(){return x.signOut()},children:"sign out "})]})}var be,pe,he,me=n(275),fe=n(281),Oe=me.a.Panel,xe=Object(A.a)(Oe)(be||(be=Object(L.a)(["\n &&& {\n     .ant-collapse-header {\n            color:white;\n     }\n     .ant-collapse-content-box{\n         padding : 0 40px;\n     } \n     .add-room{\n            color:  white;\n            padding: 0;\n     }\n   \n }\n"]))),ve=Object(A.a)(u.a.Link)(pe||(pe=Object(L.a)(["\n\n&&&{\n    display:block;\n            margin-bottom:5px;\n             color:#FFCC33;\n             font-weight: bold;\n             border-bottom: 1px solid #fff;\n    }\n"])));function ge(){var e=c.a.useContext(ee),t=e.rooms,n=e.SetisAddRoomVisible,a=e.setSelectedRoomId;return Object(N.jsx)(me.a,{ghost:!0,defaultActiveKey:["1"],children:Object(N.jsxs)(xe,{header:"Danh s\xe1ch c\xe1c ph\xf2ng",children:[t.map((function(e){return Object(N.jsx)(ve,{onClick:function(){return a(e.id)},children:e.name},e.id)})),Object(N.jsx)(p.a,{type:"text",icon:Object(N.jsx)(fe.a,{}),className:"add-room",onClick:function(){n(!0)},children:"Th\xeam Ph\xf2ng"})]},"1")})}var ye=A.a.div(he||(he=Object(L.a)(["\n        background:#FF6699;\n      \n        height:100vh;\n"])));function Ce(){return Object(N.jsx)(ye,{children:Object(N.jsxs)(j.a,{children:[Object(N.jsx)(b.a,{span:24,children:Object(N.jsx)(je,{})}),Object(N.jsx)(b.a,{span:24,children:Object(N.jsx)(ge,{})})]})})}var we=function(){return Object(N.jsxs)(j.a,{children:[Object(N.jsx)(b.a,{span:6,children:Object(N.jsx)(Ce,{})}),Object(N.jsx)(b.a,{span:18,children:Object(N.jsx)(de,{})})]})},Ne=n(276);function Re(){var e=c.a.useContext(ee),t=e.isAddRoomVisible,n=e.SetisAddRoomVisible,a=M.a.useForm(),r=c.a.useContext(J).user;return Object(N.jsx)("div",{children:Object(N.jsx)(Ne.a,{title:"T\u1ea1o Ph\xf2ng",visible:t,onOk:function(){var e=a[0].getFieldValue(),t=e.name,c=e.description;C("rooms",{name:t,description:c,members:[r.uid]}),a[0].resetFields(),n(!1)},onCancel:function(){a[0].resetFields(),n(!1)},children:Object(N.jsxs)(M.a,{form:a[0],layout:"vertical",children:[Object(N.jsx)(M.a.Item,{label:"T\xean Ph\xf2ng",name:"name",children:Object(N.jsx)(_.a,{placeholder:"nh\u1eadp t\xean ph\xf2ng"})}),Object(N.jsx)(M.a.Item,{label:"M\xf4 t\u1ea3",name:"description",children:Object(N.jsx)(_.a.TextArea,{placeholder:"nh\u1eadp t\xean ph\xf2ng"})})]})})})}var ke=n(181),Ie=n(274),Ue=n(172);function Se(e){var t=e.fetchOptions,n=e.debounceTimeout,r=void 0===n?300:n,i=e.curMembers,o=Object(ke.a)(e,["fetchOptions","debounceTimeout","curMembers"]),s=Object(a.useState)(!1),l=Object(S.a)(s,2),d=l[0],u=l[1],j=Object(a.useState)([]),b=Object(S.a)(j,2),p=b[0],h=b[1],m=c.a.useMemo((function(){return Object(Ue.debounce)((function(e){h([]),u(!0),t(e,i).then((function(e){h(e),u(!1)}))}),r)}),[r,t,i]);return c.a.useEffect((function(){return function(){h([])}}),[]),Object(N.jsx)(Ie.a,Object(y.a)(Object(y.a)({labelInValue:!0,filterOption:!1,onSearch:m,notFoundContent:d?Object(N.jsx)(G.a,{size:"small"}):null},o),{},{children:p.map((function(e){var t,n;return Object(N.jsxs)(Ie.a.Option,{value:e.value,title:e.label,children:[Object(N.jsx)(F.a,{size:"small",src:e.photoURL,children:e.photoURL?"":null===(t=e.label)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase()})," ".concat(e.label)]},e.value)}))}))}function Le(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(d.a)(l.a.mark((function e(t,n){var a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.i)(Object(f.b)(v,"users"),Object(f.l)("keywords","array-contains",null===t||void 0===t?void 0:t.toLowerCase()),Object(f.f)(20),Object(f.h)("displayName")),e.next=3,Object(f.d)(a);case 3:return c=e.sent,r=[],c.forEach((function(e){r.push({label:e.data().displayName,value:e.data().uid,photoURL:e.data().photoURL})})),e.abrupt("return",r.filter((function(e){return!n.includes(e.value)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){var e=Object(a.useContext)(ee),t=e.isInviteMemberVisible,n=e.setIsInviteMemberVisible,c=e.selectedRoomId,r=e.selectedRoom,i=Object(a.useState)([]),o=Object(S.a)(i,2),s=o[0],u=o[1],j=M.a.useForm(),b=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j[0].resetFields(),u([]),t=Object(f.c)(v,"rooms",c),e.next=5,Object(f.k)(t,{members:[].concat(Object(g.a)(r.members),Object(g.a)(s.map((function(e){return e.value}))))});case 5:n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{children:Object(N.jsx)(Ne.a,{title:"M\u1eddi th\xeam th\xe0nh vi\xean",visible:t,onOk:b,onCancel:function(){j[0].resetFields(),u([]),n(!1)},destroyOnClose:!0,children:Object(N.jsx)(M.a,{form:j[0],layout:"vertical",children:Object(N.jsx)(Se,{mode:"multiple",name:"search-user",label:"T\xean c\xe1c th\xe0nh vi\xean",placeholder:"Nh\u1eadp t\xean th\xe0nh vi\xean",style:{width:"100%"},value:s,fetchOptions:Le,onChange:function(e){return u(e)},curMembers:r.members})})})})}n(265);var Fe=function(){return Object(N.jsx)(W,{children:Object(N.jsxs)(te,{children:[Object(N.jsxs)(B.c,{children:[Object(N.jsx)(B.a,{element:Object(N.jsx)(U,{}),path:"/login"}),Object(N.jsx)(B.a,{element:Object(N.jsx)(we,{}),path:"/"})]}),Object(N.jsx)(Me,{}),Object(N.jsx)(Re,{})]})})};i.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(o.a,{children:Object(N.jsx)(Fe,{})})}),document.getElementById("root"))}},[[266,1,2]]]);
//# sourceMappingURL=main.63407cdc.chunk.js.map