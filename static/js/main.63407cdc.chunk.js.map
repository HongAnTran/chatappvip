{"version":3,"sources":["Filebase/config.js","Filebase/Services.js","component/login/index.js","component/ChatRoom/Message.js","context/AuthProvier.js","hook/useFirestore.js","context/AppProvider.js","component/ChatRoom/ChatWindow.js","component/ChatRoom/UserInfo.js","component/ChatRoom/RoomList.js","component/ChatRoom/SideBar.js","component/ChatRoom/index.js","component/Modals/AddRoomModal.js","component/Modals/InviteMemberModal.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","addDocument","collections","data","a","query","collection","addDoc","createdAt","serverTimestamp","generateKeywords","displayName","name","split","filter","word","length","flagArray","result","stringArray","i","findPermutation","k","push","join","reduce","acc","cur","words","arrName","curName","forEach","letter","createKeywords","Title","Typography","fbProvider","FacebookAuthProvider","Login","handleLogin","signInWithPopup","_tokenResponse","user","isNewUser","email","photoURL","uid","providerID","providerId","keywords","toLowerCase","e","console","error","justify","style","height","span","textAlign","width","marginBottom","onClick","WrapperStyled","styled","div","formatDate","seconds","formattedDate","formatRelative","Date","charAt","toUpperCase","slice","Message","text","size","src","className","marginRight","flexShrink","Text","display","flexDirection","AuthContext","React","createContext","AuthProvier","children","useState","setUser","history","useNavigate","loading","setLoading","useEffect","onAuthStateChanged","Provider","value","useFirestore","collectionS","condition","document","setDocument","collectionRef","orderBy","compareValue","where","fieldName","operator","onSnapshot","snapshot","docs","map","doc","id","AppContext","AppProvider","isAddRoomVisible","SetisAddRoomVisible","selectedRoomId","setSelectedRoomId","isInviteMemberVisible","setIsInviteMemberVisible","useContext","roomConditions","useMemo","rooms","selectedRoom","find","room","menberConditions","members","HeaderStyled","ButtonGroupStyled","ContentStyled","FromStyled","Form","MessageListStyled","ChatWindow","inputRef","useRef","messageListRef","inputValue","setInputValue","useForm","form","handleOnsubmit","roomId","resetFields","current","setTimeout","focus","messagesDB","scrollTop","scrollHeight","description","icon","UserAddOutlined","type","Group","maxCount","member","title","ref","mes","color","colorMessage","Item","onChange","target","handleInputChange","onPressEnter","bordered","autoComplete","placeholder","message","showIcon","margin","memo","UserInfo","ghost","signOut","Panel","Collapse","PanelStyle","LinkStyle","Link","RoomList","defaultActiveKey","header","PlusSquareOutlined","SidebarStyles","SideBar","ChatRoom","AddRoomModal","visible","onOk","getFieldValue","onCancel","layout","label","TextArea","DebounceSelect","fetchOptions","debounceTimeout","curMembers","props","fetching","setFetching","options","setOptions","debounceFetcher","debounce","then","newOptions","labelInValue","filterOption","onSearch","notFoundContent","opt","Option","fetchUserList","search","use","limit","getDocs","anc","arrAA","includes","InviteMemberModal","setValue","handleOk","roomRef","updateDoc","val","destroyOnClose","mode","newValue","App","element","path","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.63407cdc.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\n\r\nimport { getAuth ,connectAuthEmulator} from \"firebase/auth\";\r\nimport { getFirestore,connectFirestoreEmulator } from \"firebase/firestore\"\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCMkE9L2Mu1PCh5dfDQXejgZQI-BUCcA_s\",\r\n  authDomain: \"chat-app-2-ca78a.firebaseapp.com\",\r\n  projectId: \"chat-app-2-ca78a\",\r\n  storageBucket: \"chat-app-2-ca78a.appspot.com\",\r\n  messagingSenderId: \"81901785324\",\r\n  appId: \"1:81901785324:web:2e828598a573fea29d15c9\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\n\r\nconst auth = getAuth(app);\r\nconst db = getFirestore()\r\n\r\n// connectAuthEmulator(auth,\"http://localhost:9099\")\r\n// if(window.location.hostname===\"localhost\"){\r\n\r\n//   connectFirestoreEmulator(db, 'localhost', 8080);\r\n// }\r\nexport {auth,db} \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","\r\nimport {db} from './config'\r\nimport { collection, addDoc,serverTimestamp} from \"firebase/firestore\"; \r\n\r\n\r\nexport const addDocument = async (collections,data) =>{\r\n\r\n    const query = collection(db,collections)\r\n\r\n   await addDoc(query,{\r\n       ...data,\r\n       createdAt:serverTimestamp()\r\n   })\r\n   \r\n}\r\n\r\n\r\nexport const generateKeywords = (displayName) => {\r\n    // liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\r\n    // => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\r\n    const name = displayName.split(' ').filter((word) => word);\r\n  \r\n    const length = name.length;\r\n    let flagArray = [];\r\n    let result = [];\r\n    let stringArray = [];\r\n  \r\n    /**\r\n     * khoi tao mang flag false\r\n     * dung de danh dau xem gia tri\r\n     * tai vi tri nay da duoc su dung\r\n     * hay chua\r\n     **/\r\n    for (let i = 0; i < length; i++) {\r\n      flagArray[i] = false;\r\n    }\r\n  \r\n    const createKeywords = (name) => {\r\n      const arrName = [];\r\n      let curName = '';\r\n      name.split('').forEach((letter) => {\r\n        curName += letter;\r\n        arrName.push(curName);\r\n      });\r\n      return arrName;\r\n    };\r\n  \r\n    function findPermutation(k) {\r\n      for (let i = 0; i < length; i++) {\r\n        if (!flagArray[i]) {\r\n          flagArray[i] = true;\r\n          result[k] = name[i];\r\n  \r\n          if (k === length - 1) {\r\n            stringArray.push(result.join(' '));\r\n          }\r\n  \r\n          findPermutation(k + 1);\r\n          flagArray[i] = false;\r\n        }\r\n      }\r\n    }\r\n  \r\n    findPermutation(0);\r\n  \r\n    const keywords = stringArray.reduce((acc, cur) => {\r\n      const words = createKeywords(cur);\r\n      return [...acc, ...words];\r\n    }, []);\r\n  \r\n    return keywords;\r\n  };","import React from 'react'\r\nimport { Row,Col,Button ,Typography} from 'antd'\r\nimport { signInWithPopup, FacebookAuthProvider}  from 'firebase/auth'\r\nimport { auth } from '../../Filebase/config'\r\nimport { addDocument,generateKeywords } from '../../Filebase/Services';\r\n\r\nconst {Title } = Typography\r\nconst fbProvider = new FacebookAuthProvider()\r\n \r\n  function Login() {\r\n\r\n      const handleLogin = async () => {\r\n        const {_tokenResponse,user}=  await signInWithPopup(auth,fbProvider)\r\n            \r\n                if(_tokenResponse?.isNewUser){\r\n                    try {\r\n                         addDocument('users' ,{\r\n\r\n                            displayName: user.displayName,\r\n                            email: user.email,\r\n                            photoURL: user.photoURL,\r\n                            uid: user.uid,\r\n                            providerID: user.providerId,\r\n                            keywords: generateKeywords(user.displayName?.toLowerCase()),\r\n                            \r\n                        })\r\n\r\n                 \r\n                        \r\n                      } catch (e) {\r\n                        console.error(\"Error adding document: \", e);\r\n                      }\r\n                }\r\n        }\r\n    return (\r\n        <div>\r\n         <Row justify=\"center\" style={{height:800}}>\r\n            <Col span={8}>\r\n                <Title style={{textAlign: 'center'}}>Login</Title>\r\n                <Button style={{width :'100%',marginBottom:5}}\r\n                    onClick={handleLogin}\r\n                >Đăng nhập bằng Facebook</Button>\r\n                <Button style={{width :'100%'}}>Đăng nhập bằng Google</Button>\r\n            </Col>\r\n        </Row>\r\n        </div>\r\n     \r\n    )\r\n}\r\n\r\nexport default Login\r\n","import React from 'react'\r\nimport { Avatar ,Typography } from 'antd'\r\nimport styled  from 'styled-components'\r\nimport { formatRelative } from 'date-fns/esm';\r\nconst WrapperStyled = styled.div`\r\n        margin-bottom: 12px;\r\n        padding: 4px;\r\n         padding-left: 12px;\r\n        display: flex;\r\n        border-bottom: 1px solid rgb(230, 230, 230);\r\n        .author{\r\n            color: #fff;\r\n            font-weight: bold;\r\n        }\r\n        .displayname{\r\n            margin-left: 5px;\r\n            font-weight: bold;\r\n            color: #fff;\r\n\r\n        }\r\n        .date{\r\n            margin-left: 10px;\r\n            font-size: 12px;\r\n            color: #000; \r\n        }\r\n        .content{\r\n            color: #fff;\r\n        }\r\n\r\n        .messageStyledchat{\r\n          background-color: \t#FF66CC;\r\n            border-radius: 12px;\r\n            padding:6px;   \r\n        }\r\n     \r\n\r\n      \r\n\r\n`\r\n\r\nfunction formatDate(seconds) {\r\n    \r\n    let formattedDate = '';\r\n  \r\n    if (seconds) {\r\n      formattedDate = formatRelative(new Date(seconds * 1000), new Date());\r\n  \r\n      formattedDate =\r\n        formattedDate.charAt(0).toUpperCase() + formattedDate.slice(1);\r\n    }\r\n  \r\n    return formattedDate;\r\n  }\r\n  export default    function Message({ text, displayName, createdAt, photoURL}) {\r\n   \r\n      \r\n    return (\r\n      <WrapperStyled>\r\n           <Avatar size=\"large\" src={photoURL} className=\"avt_mess\" style={{marginRight:12,flexShrink:0}}>\r\n            {photoURL ? '' : displayName?.charAt(0)?.toUpperCase()}\r\n          </Avatar>\r\n        <div className=\"messageStyledchat\"   >\r\n         \r\n          <Typography.Text className='author'>{displayName}</Typography.Text>\r\n          <Typography.Text className='date'>\r\n            {formatDate(createdAt?.seconds)}\r\n          </Typography.Text>\r\n\r\n          <div style={{display: 'flex', flexDirection: 'column'}}>\r\n          <Typography.Text className='content'>{text}</Typography.Text>\r\n          \r\n        </div>\r\n        </div>\r\n        \r\n        \r\n      </WrapperStyled>\r\n    );\r\n  }\r\n","import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { auth } from \"../Filebase/config\";\r\nimport { useState } from \"react\";\r\nimport { Spin } from \"antd\";\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nfunction AuthProvier({ children }) {\r\n  const [user, setUser] = useState({});\r\n  const history = useNavigate();\r\n  const [ loading,setLoading] = useState(true);\r\n\r\n\r\n\r\n  React.useEffect(() => {\r\n   auth.onAuthStateChanged((user) => {\r\n        if (user) {\r\n        const { displayName, uid, email, photoURL} = user;\r\n        setUser({\r\n          displayName,\r\n          uid,\r\n          email,\r\n          photoURL,\r\n          \r\n        });\r\n        setLoading(false);\r\n        history(\"/\");\r\n      }else{\r\n        setLoading(false);\r\n\r\n          history(\"/login\");\r\n      }\r\n    });\r\n\r\n\r\n  }, [history]);\r\n\r\n      \r\n\r\n\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user }}>\r\n        \r\n        {loading ? <Spin></Spin> :children}\r\n        \r\n        </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport default AuthProvier;\r\n","import React from \"react\";\r\nimport { db } from \"../Filebase/config\";\r\nimport {\r\n  onSnapshot,\r\n  collection,\r\n  query,\r\n  where,\r\n  orderBy,\r\n} from \"firebase/firestore\";\r\n\r\nconst useFirestore = (collectionS, condition) => {\r\n  const [document, setDocument] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    let collectionRef = query(\r\n      collection(db, collectionS),\r\n      orderBy(\"createdAt\")\r\n    );\r\n\r\n    if (condition) {\r\n      if (!condition.compareValue || !condition.compareValue.length) {\r\n        return;\r\n      }\r\n      collectionRef = query(\r\n        collectionRef,\r\n        where(condition.fieldName, condition.operator, condition.compareValue)\r\n      );\r\n    }\r\n\r\n    const unsub = onSnapshot(collectionRef, (snapshot) => {\r\n      const data = snapshot.docs.map((doc) => ({\r\n        ...doc.data(),\r\n        id: doc.id,\r\n      }));\r\n\r\n      setDocument(data);\r\n    });\r\n\r\n    return unsub;\r\n  }, [collectionS, condition]);\r\n\r\n  return document;\r\n};\r\n\r\nexport default useFirestore;\r\n","import React from 'react'\r\nimport useFirestore from '../hook/useFirestore'\r\nimport {AuthContext} from \"./AuthProvier\"\r\n\r\nexport const AppContext = React.createContext()\r\n\r\nexport default function AppProvider({children}) {\r\n        const [isAddRoomVisible,SetisAddRoomVisible] = React.useState(false)\r\n        const [selectedRoomId,setSelectedRoomId] = React.useState('')\r\n        const [isInviteMemberVisible, setIsInviteMemberVisible] = React.useState(false);\r\n        \r\n\r\n    const {user} = React.useContext(AuthContext)\r\n\r\n    const roomConditions = React.useMemo(() => {\r\n        return {\r\n            fieldName:'members',\r\n            operator:'array-contains',\r\n            compareValue:user.uid\r\n        }\r\n    },[user.uid])\r\n\r\n    // const {rooms,selectedRoomId} = React.useContext(AppContext)\r\n  \r\n    const rooms = useFirestore('rooms' ,roomConditions)\r\n\r\n const selectedRoom =  React.useMemo(() => {\r\n     return rooms.find(room => room.id === selectedRoomId) || {}\r\n },[selectedRoomId,rooms])\r\n\r\n    const menberConditions = React.useMemo(() => {\r\n        return {\r\n            fieldName:'uid',\r\n            operator:'in',\r\n            compareValue:selectedRoom.members,\r\n        }\r\n    },[selectedRoom.members])\r\n\r\n    const members = useFirestore('users' , menberConditions)\r\n\r\n\r\n\r\n\r\n           \r\n            \r\n \r\n\r\n          \r\n    \r\n\r\n    return (\r\n        <AppContext.Provider value={{\r\n            rooms , isAddRoomVisible,SetisAddRoomVisible,selectedRoomId,\r\n            setSelectedRoomId,selectedRoom,members,\r\n            isInviteMemberVisible, setIsInviteMemberVisible\r\n            \r\n            }}>\r\n                {children}\r\n        </AppContext.Provider>\r\n    )\r\n}\r\n","import React, { memo ,useRef,useEffect} from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Avatar, Button, Tooltip, Form, Input, Alert } from \"antd\";\r\nimport Message from './Message';\r\nimport { AuthContext } from \"../../context/AuthProvier\";\r\nimport { UserAddOutlined } from \"@ant-design/icons\";\r\nimport { AppContext } from \"../../context/AppProvider\";\r\nimport { addDocument } from \"../../Filebase/Services\";\r\nimport useFirestore from \"../../hook/useFirestore\"\r\n\r\n\r\nconst HeaderStyled = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  height: 56px;\r\n  padding: 0 16px;\r\n  align-items: center;\r\n  border-bottom: 1px solid rgb(230, 230, 230);\r\n\r\n  .header {\r\n    &__info {\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n    }\r\n\r\n    &__title {\r\n      margin: 0;\r\n      font-weight: bold;\r\n      font-size: 20px;\r\n      \r\n    }\r\n    &__description {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n`;\r\nconst ButtonGroupStyled = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst WrapperStyled = styled.div`\r\n  height: 100vh;\r\n`;\r\nconst ContentStyled = styled.div`\r\n  height: calc(100% - 56px);\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 12px 12px 12px 0;\r\n  justify-content: flex-end;\r\n`;\r\nconst FromStyled = styled(Form)`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 2px 2px 2px 0;\r\n  border: 1px solid rgb(230, 230, 230);\r\n  border-radius: 2px;\r\n\r\n  .ant-form-item {\r\n    flex: 1;\r\n    margin-bottom: 0;\r\n  }\r\n\r\n  .ant-form-item:nth-child(2) {\r\n    flex: 0;\r\n    margin-bottom: 0;\r\n    cursor: pointer;\r\n    \r\n    .ant-form-item-control-input-content{\r\n        position: relative;\r\n      display: flex;\r\n    }\r\n  }\r\n`;\r\nconst MessageListStyled = styled.div`\r\n  max-height: 100%;\r\n  overflow-y: auto;\r\n`;\r\n\r\n\r\nfunction ChatWindow() {\r\n  const {\r\n    user: { uid, photoURL, displayName },\r\n  } = React.useContext(AuthContext);\r\n  const inputRef = useRef(null);\r\n  const messageListRef = useRef(null);\r\n\r\n\r\n  const { selectedRoom, members, setIsInviteMemberVisible } =\r\n    React.useContext(AppContext);\r\n\r\n  const [inputValue, setInputValue] = React.useState(\"\");\r\n \r\n  const [form] = Form.useForm();\r\n\r\n\r\n\r\n       \r\n\r\n     \r\n\r\n  const handleOnsubmit = async () => {\r\n  \r\n  \r\n\r\n   if(inputValue){\r\n    addDocument(\"messages\", {\r\n      text: inputValue,\r\n      uid,\r\n      photoURL,\r\n      roomId: selectedRoom.id,\r\n      displayName,\r\n      // colorMessage,\r\n    });\r\n   }\r\n   form.resetFields([\"messages\",\"img\"]);\r\n   \r\n   setInputValue('');\r\n  \r\n    if (inputRef?.current) {\r\n      setTimeout(() => {\r\n        inputRef.current.focus();\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleInputChange = (e) => {\r\n\r\n   \r\n    setInputValue(e.target.value);\r\n  };\r\n\r\n             \r\n         \r\n\r\n\r\n\r\n  const condition = React.useMemo(\r\n    () => ({\r\n      fieldName: 'roomId',\r\n      operator: '==',\r\n      compareValue: selectedRoom.id,\r\n    }),\r\n    [selectedRoom.id]\r\n  );\r\n  const messagesDB = useFirestore('messages',condition) \r\n\r\n  useEffect(() => {\r\n    // scroll to bottom after message changed\r\n    if (messageListRef?.current) {\r\n      messageListRef.current.scrollTop =\r\n        messageListRef.current.scrollHeight + 50;\r\n    }\r\n  }, [messagesDB]);\r\n  return (\r\n    <WrapperStyled>\r\n      {selectedRoom.id ? (\r\n        <>\r\n          <HeaderStyled>\r\n            <div className=\"header__info\">\r\n              <p className=\"header__title\">{selectedRoom.name}</p>\r\n              <span className=\"header__desciption\">\r\n                {selectedRoom.description}\r\n              </span>\r\n            </div>\r\n            <ButtonGroupStyled>\r\n              <Button\r\n                icon={<UserAddOutlined />}\r\n                type=\"text\"\r\n                onClick={() => setIsInviteMemberVisible(true)}\r\n              >\r\n                Mời{\" \"}\r\n              </Button>\r\n\r\n              <Avatar.Group size=\"small\" maxCount={2}>\r\n                {members.map((member) => {\r\n                  return (\r\n                    <Tooltip title={member.displayName} key={member.id}>\r\n                      <Avatar src={member.photoURL}>\r\n                        {member.photoURL\r\n                          ? \"\"\r\n                          : member.displayName?.charAt(0).toUpperCase()}\r\n                      </Avatar>\r\n                    </Tooltip>\r\n                  );\r\n                })}\r\n              </Avatar.Group>\r\n            </ButtonGroupStyled>\r\n          </HeaderStyled>\r\n          <ContentStyled>\r\n            <MessageListStyled ref={messageListRef}>\r\n            {messagesDB.map((mes) => (\r\n                <Message\r\n                  key={mes.id}\r\n                  text={mes.text}\r\n                  photoURL={mes.photoURL}\r\n                  displayName={mes.displayName}\r\n                  createdAt={mes.createdAt}\r\n                  color={mes.colorMessage}\r\n                  \r\n                />\r\n              ))}\r\n            </MessageListStyled>\r\n\r\n            <FromStyled form={form}>\r\n              <Form.Item name=\"messages\">\r\n                <Input\r\n                   ref={inputRef}\r\n                  value={inputValue}\r\n                  onChange={(e) => handleInputChange(e)}\r\n                  onPressEnter={handleOnsubmit}\r\n                  bordered={false}\r\n                  autoComplete=\"off\"\r\n                  placeholder=\"nhập chat\"\r\n                ></Input>\r\n                  \r\n              \r\n              </Form.Item>\r\n\r\n              <Button type=\"primary\" onClick={handleOnsubmit}>\r\n                Gửi\r\n              </Button>\r\n            </FromStyled>\r\n          </ContentStyled>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Alert\r\n            message=\"hãy chọn phòng\"\r\n            type=\"info\"\r\n            showIcon\r\n            style={{ margin: 5 }}\r\n          />\r\n        </>\r\n      )}\r\n    </WrapperStyled>\r\n  );\r\n}\r\n\r\nexport default memo(ChatWindow);\r\n","import React from 'react'\r\nimport { Button,Avatar,Typography } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { auth } from '../../Filebase/config'\r\nimport {AuthContext } from \"../../context/AuthProvier\"\r\nconst WrapperStyled = styled.div`\r\n        display:flex;\r\n        justify-content:space-between;\r\n        padding:12px 16px;\r\n        border-bottom:1px solid #ccc;\r\n\r\n        .usermain{\r\n            display:flex;\r\n            align-items:center;\r\n        }\r\n        .username{\r\n            color:white;\r\n            margin-left:10px;\r\n        }\r\n\r\n`\r\n\r\n\r\n\r\nexport default function UserInfo() {\r\n    const {user} = React.useContext(AuthContext)\r\n      \r\n    return (\r\n        <WrapperStyled>\r\n            <div className=\"usermain\">\r\n                <Avatar src={user.photoURL}>{user.photoURL ? '' : user.displayName?.charAt(0)?.toUpperCase()}</Avatar>\r\n                <Typography.Text className=\"username\">{user.displayName}</Typography.Text>\r\n            </div>\r\n            <Button ghost onClick={( ) =>auth.signOut() }>sign out </Button>\r\n        </WrapperStyled>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {Collapse,Typography ,Button} from 'antd'\r\nimport styled from 'styled-components'\r\nimport {PlusSquareOutlined} from '@ant-design/icons'\r\nimport { AppContext } from '../../context/AppProvider'\r\n\r\nconst {Panel} = Collapse\r\n\r\nconst PanelStyle = styled(Panel)`\r\n &&& {\r\n     .ant-collapse-header {\r\n            color:white;\r\n     }\r\n     .ant-collapse-content-box{\r\n         padding : 0 40px;\r\n     } \r\n     .add-room{\r\n            color:  white;\r\n            padding: 0;\r\n     }\r\n   \r\n }\r\n`\r\n\r\nconst LinkStyle = styled(Typography.Link)`\r\n\r\n&&&{\r\n    display:block;\r\n            margin-bottom:5px;\r\n             color:#FFCC33;\r\n             font-weight: bold;\r\n             border-bottom: 1px solid #fff;\r\n    }\r\n`\r\n\r\nexport default function RoomList() {\r\n    \r\nconst {rooms,SetisAddRoomVisible,setSelectedRoomId}  = React.useContext(AppContext)\r\n\r\nconst handleAddRoom = ()=>{\r\nSetisAddRoomVisible(true)\r\n}\r\n    return (\r\n\r\n        <Collapse ghost defaultActiveKey={['1']}>\r\n            <PanelStyle header=\"Danh sách các phòng\" key=\"1\">\r\n               {\r\n                    rooms.map((room) =>{\r\n                        return (\r\n                            <LinkStyle key={room.id}\r\n                                onClick={() =>setSelectedRoomId(room.id)}\r\n                            >{room.name}</LinkStyle>\r\n                        )\r\n                    })\r\n\r\n               }\r\n                <Button type=\"text\" icon={<PlusSquareOutlined />} className=\"add-room\"\r\n                    onClick={handleAddRoom}\r\n                >Thêm Phòng</Button>\r\n            </PanelStyle>\r\n        </Collapse>\r\n    )\r\n}\r\n","import { Col, Row } from 'antd'\r\nimport React from 'react'\r\nimport UserInfo  from './UserInfo'\r\nimport RoomList  from './RoomList'\r\nimport styled from 'styled-components'\r\nconst SidebarStyles =  styled.div`\r\n        background:#FF6699;\r\n      \r\n        height:100vh;\r\n`;\r\n\r\nexport default function SideBar() {\r\n    return (\r\n        <SidebarStyles>\r\n\r\n        <Row>\r\n          <Col span={24}><UserInfo /></Col>\r\n          <Col span={24}><RoomList /></Col>\r\n        </Row>\r\n        </SidebarStyles>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport ChatWindow from './ChatWindow'\r\nimport SideBar from './SideBar'\r\nimport { Row ,Col} from 'antd'\r\nfunction ChatRoom() {\r\n    return (\r\n        <Row>\r\n            <Col span={6}>\r\n            \r\n           <SideBar />\r\n            </Col> \r\n\r\n            <Col span={18}>\r\n           <ChatWindow />\r\n            \r\n             </ Col> \r\n           \r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default ChatRoom\r\n","import React from 'react'\r\nimport {Modal , Form,Input} from \"antd\"\r\nimport {AppContext} from \"../../context/AppProvider\"\r\nimport { addDocument } from '../../Filebase/Services';\r\nimport {AuthContext } from \"../../context/AuthProvier\"\r\nexport default function AddRoomModal() {\r\nconst {isAddRoomVisible,SetisAddRoomVisible} = React.useContext(AppContext)  \r\n\r\n    \r\n    const form = Form.useForm()\r\n  \r\n    const {user} = React.useContext(AuthContext)\r\n    const handleOk = ()=>{\r\n        // add new room to firestore \r\n        const {name,description} = form[0].getFieldValue()\r\n        addDocument('rooms', {\r\n                name,\r\n                description,\r\n                members:[user.uid]\r\n        })\r\n                form[0].resetFields()\r\n\r\n\r\n\r\n            SetisAddRoomVisible(false)\r\n\r\n    }\r\n\r\n    const handleCancel = ()=>{\r\n        form[0].resetFields()\r\n        SetisAddRoomVisible(false)\r\n        \r\n    }\r\n    return (\r\n        <div>\r\n            <Modal\r\n                title='Tạo Phòng'\r\n                visible ={isAddRoomVisible}\r\n                onOk={handleOk}\r\n                onCancel={handleCancel}\r\n            >\r\n            <Form form={form[0]} layout='vertical'>\r\n                <Form.Item label=\"Tên Phòng\" name=\"name\">\r\n                        <Input placeholder=\"nhập tên phòng\"/>\r\n                </Form.Item>\r\n                <Form.Item label=\"Mô tả\" name=\"description\">\r\n                        <Input.TextArea placeholder=\"nhập tên phòng\"/>\r\n                </Form.Item>\r\n            </Form>\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n","import React, { useContext, useState } from 'react';\r\nimport { Form, Modal, Select, Spin, Avatar } from 'antd';\r\nimport { AppContext } from '../../context/AppProvider';\r\nimport { debounce } from 'lodash';\r\nimport { db } from '../../Filebase/config';\r\nimport { collection,query,where,orderBy ,limit,getDocs,doc,updateDoc} from \"firebase/firestore\"\r\nfunction DebounceSelect({\r\n  fetchOptions,\r\n  debounceTimeout = 300,\r\n  curMembers,\r\n  ...props\r\n}) {\r\n  // Search: abcddassdfasdf\r\n\r\n  const [fetching, setFetching] = useState(false);\r\n  const [options, setOptions] = useState([]);\r\n\r\n  const debounceFetcher = React.useMemo(() => {\r\n    const loadOptions = (value) => {\r\n      setOptions([]);\r\n      setFetching(true);\r\n\r\n      fetchOptions(value, curMembers).then((newOptions) => {\r\n        setOptions(newOptions);\r\n        setFetching(false);\r\n      });\r\n    };\r\n\r\n    return debounce(loadOptions, debounceTimeout);\r\n  }, [debounceTimeout, fetchOptions, curMembers]);\r\n\r\n  React.useEffect(() => {\r\n    return () => {\r\n      // clear when unmount\r\n      setOptions([]);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Select\r\n      labelInValue\r\n      filterOption={false}\r\n      onSearch={debounceFetcher}\r\n      notFoundContent={fetching ? <Spin size='small' /> : null}\r\n      {...props}\r\n    >\r\n      {options.map((opt) => (\r\n        <Select.Option key={opt.value} value={opt.value} title={opt.label}>\r\n          <Avatar size='small' src={opt.photoURL}>\r\n            {opt.photoURL ? '' : opt.label?.charAt(0)?.toUpperCase()}\r\n          </Avatar>\r\n          {` ${opt.label}`}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n}\r\n///////////////////////////////\r\nasync function fetchUserList(search, curMembers) {\r\n  \r\n  const use = query(collection(db,'users'), where(\"keywords\", \"array-contains\", search?.toLowerCase()),limit(20),orderBy('displayName'))\r\n  const anc = await getDocs(use)\r\n  let arrAA = []\r\n      anc.forEach((doc) =>{\r\n\r\n         arrAA.push({\r\n          label: doc.data().displayName,\r\n          value: doc.data().uid,\r\n          photoURL: doc.data().photoURL,\r\n       })\r\n      })\r\n      \r\n      return arrAA.filter(opt => !curMembers.includes(opt.value))\r\n\r\n}\r\n\r\nexport default function InviteMemberModal() {\r\n  const {\r\n    isInviteMemberVisible,\r\n    setIsInviteMemberVisible,\r\n    selectedRoomId,\r\n    selectedRoom,\r\n  } = useContext(AppContext);\r\n  const [value, setValue] = useState([]);\r\n  const form= Form.useForm();\r\n\r\n  const handleOk = async () => {\r\n    // reset form value\r\n    form[0].resetFields();\r\n    setValue([]);\r\n\r\n    // update members in current room\r\n    const roomRef = doc(db, \"rooms\", selectedRoomId);\r\n    await updateDoc(roomRef, {\r\n      members: [...selectedRoom.members, ...value.map((val) => val.value)],\r\n    });\r\n    setIsInviteMemberVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    // reset form value\r\n    form[0].resetFields();\r\n    setValue([]);\r\n    setIsInviteMemberVisible(false);\r\n  };\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        title='Mời thêm thành viên'\r\n        visible={isInviteMemberVisible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n        destroyOnClose={true}\r\n      >\r\n        <Form form={form[0]} layout='vertical'>\r\n          <DebounceSelect\r\n            mode='multiple'\r\n            name='search-user'\r\n            label='Tên các thành viên'\r\n            placeholder='Nhập tên thành viên'\r\n            style={{ width: '100%' }}\r\n            value={value}\r\n            fetchOptions={fetchUserList}\r\n            onChange={(newValue) => setValue(newValue)}\r\n            curMembers={selectedRoom.members}\r\n          />\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n","import Login from './component/login/index';\nimport ChatRoom from './component/ChatRoom/index';\nimport AddRoomModal from './component/Modals/AddRoomModal';\nimport InviteMemberModal from './component/Modals/InviteMemberModal';\nimport AuthProvier from './context/AuthProvier';\nimport AppProvider from './context/AppProvider';\nimport './App.css';\n\nimport {\n  Routes,\n  Route,\n} from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <AuthProvier>\n      <AppProvider>\n\n      <Routes>\n      <Route element={<Login />} path=\"/login\" /> \n        <Route element={<ChatRoom />} path=\"/\" /> \n\n      </Routes>\n    <InviteMemberModal/>\n      <AddRoomModal/>\n      </AppProvider>\n    </AuthProvier>\n    \n\n    \n     \n    \n   \n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  BrowserRouter ,\n \n} from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n"],"sourceRoot":""}